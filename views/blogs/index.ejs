<html lang="en">
<%- include("../partials/head.ejs") %>

  <body>
    <%- include("../partials/nav.ejs") %>

      <div class="container">
      <br>
        <div class="row">
        <% if (blogs.length> 0) { %>
          <% blogs.forEach(blog=> { %>
            <div class=" col-sm-auto col-md-2 d-flex align-items-stretch text-center">
              <div class="card card-1">
                
                  <img src="<%= blog.img %>" class="game-img" alt="<%= blog.img %> ">
                 
               
                <div class="card-body">
                  <h5 class="card-title">
                    <%= blog.title%>
                  </h5>
                  <p> <%= blog.snippet %></p>
                  <p> <%= blog.multiblog %></p>
                  <p> <%= blog.console %></p>
                
                  <a href="/blogs/<%= blog._id %> " class="btn btn-primary"><i class="fa fa-user-secret"
                      aria-hidden="true"></i></a>
                    
                  <a class="deleteblog btn btn-warning" data-doc="<%= blog._id %>"> <i class="fa fa-trash"></i>
                  </a>
                  <a href="/updateblog/<%= blog._id %>"><button class="btn btn-success"><i
                        class="fa fa-cloud-upload" aria-hidden="true"></i></button></a>
                </div>
              
              </div>
            </div>

            <% }) %>
              <% } else { %>
                <p>There are no blogs to display...</p>
                <% } %>
                </div>
      </div>

      <%- include("../partials/footer.ejs") %>
      <script>
        const trashcan = document.querySelector('a.delete');
        trashcan.addEventListener('click', (e) => {
            const endpoint = `/blogs/${trashcan.dataset.doc}`;
            fetch(endpoint, {
                method: 'DELETE',
            })
                .then(response => response.json())
                .then(data => window.location.href = data.redirect)
                .catch(err => console.log(err));
        });
    
    </script>
  </body>

</html>